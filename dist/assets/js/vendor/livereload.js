/*! dtelepathy 02-04-2014 */
!function(){var a,b={},c={},d={},e={},f={},g={},h={},i={};a={bind:function(a,b,c){if(a.addEventListener)return a.addEventListener(b,c,!1);if(a.attachEvent)return a[b]=1,a.attachEvent("onpropertychange",function(a){return a.propertyName===b?c():void 0});throw new Error("Attempt to attach custom event "+b+" to something which isn't a DOMElement")},fire:function(a,b){var c;if(a.addEventListener)return c=document.createEvent("HTMLEvents"),c.initEvent(b,!0,!0),document.dispatchEvent(c);if(!a.attachEvent)throw new Error("Attempt to fire custom event "+b+" on something which isn't a DOMElement");return a[b]?a[b]++:void 0}},b.bind=a.bind,b.fire=a.fire;var j,k,l,m,n=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1};c.PROTOCOL_6=j="http://livereload.com/protocols/official-6",c.PROTOCOL_7=k="http://livereload.com/protocols/official-7",c.ProtocolError=m=function(){function a(a,b){this.message="LiveReload protocol error ("+a+') after receiving data: "'+b+'".'}return a}(),c.Parser=l=function(){function a(a){this.handlers=a,this.reset()}return a.prototype.reset=function(){return this.protocol=null},a.prototype.process=function(a){var b,c,d,e;try{if(null==this.protocol){if(a.match(/^!!ver:([\d.]+)$/))this.protocol=6;else if(c=this._parseMessage(a,["hello"])){if(!c.protocols.length)throw new m("no protocols specified in handshake message");if(n.call(c.protocols,k)>=0)this.protocol=7;else{if(!(n.call(c.protocols,j)>=0))throw new m("no supported protocols found");this.protocol=6}}return this.handlers.connected(this.protocol)}if(6===this.protocol){if(c=JSON.parse(a),!c.length)throw new m("protocol 6 messages must be arrays");if(b=c[0],d=c[1],"refresh"!==b)throw new m("unknown protocol 6 command");return this.handlers.message({command:"reload",path:d.path,liveCSS:null!=(e=d.apply_css_live)?e:!0})}return c=this._parseMessage(a,["reload","alert"]),this.handlers.message(c)}catch(f){if(f instanceof m)return this.handlers.error(f);throw f}},a.prototype._parseMessage=function(a,b){var c,d;try{c=JSON.parse(a)}catch(e){throw new m("unparsable JSON",a)}if(!c.command)throw new m('missing "command" key',a);if(d=c.command,n.call(b,d)<0)throw new m("invalid command '"+c.command+"', only valid commands are: "+b.join(", ")+")",a);return c},a}();var o,j,k,l,p,q;q=c,l=q.Parser,j=q.PROTOCOL_6,k=q.PROTOCOL_7,p="2.0.8",d.Connector=o=function(){function a(a,b,c,d){var e=this;this.options=a,this.WebSocket=b,this.Timer=c,this.handlers=d,this._uri="ws://"+this.options.host+":"+this.options.port+"/livereload",this._nextDelay=this.options.mindelay,this._connectionDesired=!1,this.protocol=0,this.protocolParser=new l({connected:function(a){return e.protocol=a,e._handshakeTimeout.stop(),e._nextDelay=e.options.mindelay,e._disconnectionReason="broken",e.handlers.connected(a)},error:function(a){return e.handlers.error(a),e._closeOnError()},message:function(a){return e.handlers.message(a)}}),this._handshakeTimeout=new c(function(){return e._isSocketConnected()?(e._disconnectionReason="handshake-timeout",e.socket.close()):void 0}),this._reconnectTimer=new c(function(){return e._connectionDesired?e.connect():void 0}),this.connect()}return a.prototype._isSocketConnected=function(){return this.socket&&this.socket.readyState===this.WebSocket.OPEN},a.prototype.connect=function(){var a=this;return this._connectionDesired=!0,this._isSocketConnected()?void 0:(this._reconnectTimer.stop(),this._disconnectionReason="cannot-connect",this.protocolParser.reset(),this.handlers.connecting(),this.socket=new this.WebSocket(this._uri),this.socket.onopen=function(b){return a._onopen(b)},this.socket.onclose=function(b){return a._onclose(b)},this.socket.onmessage=function(b){return a._onmessage(b)},this.socket.onerror=function(b){return a._onerror(b)})},a.prototype.disconnect=function(){return this._connectionDesired=!1,this._reconnectTimer.stop(),this._isSocketConnected()?(this._disconnectionReason="manual",this.socket.close()):void 0},a.prototype._scheduleReconnection=function(){return this._connectionDesired?this._reconnectTimer.running?void 0:(this._reconnectTimer.start(this._nextDelay),this._nextDelay=Math.min(this.options.maxdelay,2*this._nextDelay)):void 0},a.prototype.sendCommand=function(a){return null!=this.protocol?this._sendCommand(a):void 0},a.prototype._sendCommand=function(a){return this.socket.send(JSON.stringify(a))},a.prototype._closeOnError=function(){return this._handshakeTimeout.stop(),this._disconnectionReason="error",this.socket.close()},a.prototype._onopen=function(){var a;return this.handlers.socketConnected(),this._disconnectionReason="handshake-failed",a={command:"hello",protocols:[j,k]},a.ver=p,this.options.ext&&(a.ext=this.options.ext),this.options.extver&&(a.extver=this.options.extver),this.options.snipver&&(a.snipver=this.options.snipver),this._sendCommand(a),this._handshakeTimeout.start(this.options.handshake_timeout)},a.prototype._onclose=function(){return this.protocol=0,this.handlers.disconnected(this._disconnectionReason,this._nextDelay),this._scheduleReconnection()},a.prototype._onerror=function(){},a.prototype._onmessage=function(a){return this.protocolParser.process(a.data)},a}();var r,s=function(a,b){return function(){return a.apply(b,arguments)}};e.Timer=r=function(){function a(a){this.func=a,this.running=!1,this.id=null,this._handler=s(function(){return this.running=!1,this.id=null,this.func()},this)}return a.prototype.start=function(a){return this.running&&clearTimeout(this.id),this.id=setTimeout(this._handler,a),this.running=!0},a.prototype.stop=function(){return this.running?(clearTimeout(this.id),this.running=!1,this.id=null):void 0},a}(),r.start=function(a,b){return setTimeout(b,a)};var t;f.Options=t=function(){function a(){this.host=null,this.port=35729,this.snipver=null,this.ext=null,this.extver=null,this.mindelay=1e3,this.maxdelay=6e4,this.handshake_timeout=5e3}return a.prototype.set=function(a,b){switch(typeof this[a]){case"undefined":break;case"number":return this[a]=+b;default:return this[a]=b}},a}(),t.extract=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;for(m=a.getElementsByTagName("script"),i=0,k=m.length;k>i;i++)if(b=m[i],(h=b.src)&&(d=h.match(/^[^:]+:\/\/(.*)\/z?livereload\.js(?:\?(.*))?$/))){if(f=new t,(e=d[1].match(/^([^\/:]+)(?::(\d+))?$/))&&(f.host=e[1],e[2]&&(f.port=parseInt(e[2],10))),d[2])for(n=d[2].split("&"),j=0,l=n.length;l>j;j++)g=n[j],(c=g.split("=")).length>1&&f.set(c[0].replace(/-/g,"_"),c.slice(1).join("="));return f}return null},function(){var a,b,c,d,e,f,h;h=function(a){var b,c,d;return(c=a.indexOf("#"))>=0?(b=a.slice(c),a=a.slice(0,c)):b="",(c=a.indexOf("?"))>=0?(d=a.slice(c),a=a.slice(0,c)):d="",{url:a,params:d,hash:b}},d=function(a){var b;return a=h(a).url,b=0===a.indexOf("file://")?a.replace(/^file:\/\/(localhost)?/,""):a.replace(/^([^:]+:)?\/\/([^:\/]+)(:\d*)?\//,"/"),decodeURIComponent(b)},f=function(a,b,d){var e,f,g,h,i;for(e={score:0},h=0,i=b.length;i>h;h++)f=b[h],g=c(a,d(f)),g>e.score&&(e={object:f,score:g});return e.score>0?e:null},c=function(a,b){var c,d,e,f;if(a=a.replace(/^\/+/,"").toLowerCase(),b=b.replace(/^\/+/,"").toLowerCase(),a===b)return 1e4;for(c=a.split("/").reverse(),d=b.split("/").reverse(),f=Math.min(c.length,d.length),e=0;f>e&&c[e]===d[e];)++e;return e},e=function(a,b){return c(a,b)>0},a=[{selector:"background",styleNames:["backgroundImage"]},{selector:"border",styleNames:["borderImage","webkitBorderImage","MozBorderImage"]}],g.Reloader=b=function(){function b(a,b,c){this.window=a,this.console=b,this.Timer=c,this.document=this.window.document,this.importCacheWaitPeriod=200,this.plugins=[]}return b.name="Reloader",b.prototype.addPlugin=function(a){return this.plugins.push(a)},b.prototype.analyze=function(){return results},b.prototype.reload=function(a,b){var c,d,e,f,g;for(this.options=b,null==(d=this.options).stylesheetReloadTimeout&&(d.stylesheetReloadTimeout=15e3),g=this.plugins,e=0,f=g.length;f>e;e++)if(c=g[e],c.reload&&c.reload(a,b))return;return b.liveCSS&&a.match(/\.css$/i)&&this.reloadStylesheet(a)?void 0:b.liveImg&&a.match(/\.(jpe?g|png|gif)$/i)?void this.reloadImages(a):this.reloadPage()},b.prototype.reloadPage=function(){return this.window.document.location.reload()},b.prototype.reloadImages=function(b){var c,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;for(c=this.generateUniqueString(),r=this.document.images,j=0,n=r.length;n>j;j++)f=r[j],e(b,d(f.src))&&(f.src=this.generateCacheBustUrl(f.src,c));if(this.document.querySelectorAll)for(k=0,o=a.length;o>k;k++)for(s=a[k],g=s.selector,h=s.styleNames,t=this.document.querySelectorAll("[style*="+g+"]"),l=0,p=t.length;p>l;l++)f=t[l],this.reloadStyleImages(f.style,h,b,c);if(this.document.styleSheets){for(u=this.document.styleSheets,v=[],m=0,q=u.length;q>m;m++)i=u[m],v.push(this.reloadStylesheetImages(i,b,c));return v}},b.prototype.reloadStylesheetImages=function(b,c,d){var e,f,g,h,i,j,k;try{f=null!=b?b.cssRules:void 0}catch(l){}if(f)for(h=0,j=f.length;j>h;h++)switch(e=f[h],e.type){case CSSRule.IMPORT_RULE:this.reloadStylesheetImages(e.styleSheet,c,d);break;case CSSRule.STYLE_RULE:for(i=0,k=a.length;k>i;i++)g=a[i].styleNames,this.reloadStyleImages(e.style,g,c,d);break;case CSSRule.MEDIA_RULE:this.reloadStylesheetImages(e,c,d)}},b.prototype.reloadStyleImages=function(a,b,c,f){var g,h,i,j,k,l=this;for(j=0,k=b.length;k>j;j++)h=b[j],i=a[h],"string"==typeof i&&(g=i.replace(/\burl\s*\(([^)]*)\)/,function(a,b){return e(c,d(b))?"url("+l.generateCacheBustUrl(b,f)+")":a}),g!==i&&(a[h]=g))},b.prototype.reloadStylesheet=function(a){var b,c,e,g,h,i,j,k,l,m,n,o,p,q,r,s=this;for(e=function(){var a,b,d,e;for(d=this.document.getElementsByTagName("link"),e=[],a=0,b=d.length;b>a;a++)c=d[a],"stylesheet"!==c.rel||c.__LiveReload_pendingRemoval||e.push(c);return e}.call(this),b=[],q=this.document.getElementsByTagName("style"),i=0,m=q.length;m>i;i++)h=q[i],h.sheet&&this.collectImportedStylesheets(h,h.sheet,b);for(j=0,n=e.length;n>j;j++)c=e[j],this.collectImportedStylesheets(c,c.sheet,b);if(this.window.StyleFix&&this.document.querySelectorAll)for(r=this.document.querySelectorAll("style[data-href]"),k=0,o=r.length;o>k;k++)h=r[k],e.push(h);if(this.console.log("LiveReload found "+e.length+" LINKed stylesheets, "+b.length+" @imported stylesheets"),g=f(a,e.concat(b),function(a){return d(s.linkHref(a))}))g.object.rule?(this.console.log("LiveReload is reloading imported stylesheet: "+g.object.href),this.reattachImportedRule(g.object)):(this.console.log("LiveReload is reloading stylesheet: "+this.linkHref(g.object)),this.reattachStylesheetLink(g.object));else for(this.console.log("LiveReload will reload all stylesheets because path '"+a+"' did not match any specific one"),l=0,p=e.length;p>l;l++)c=e[l],this.reattachStylesheetLink(c);return!0},b.prototype.collectImportedStylesheets=function(a,b,c){var d,e,f,g,h;try{f=null!=b?b.cssRules:void 0}catch(i){}if(f&&f.length)for(d=g=0,h=f.length;h>g;d=++g)switch(e=f[d],e.type){case CSSRule.CHARSET_RULE:continue;case CSSRule.IMPORT_RULE:c.push({link:a,rule:e,index:d,href:e.href}),this.collectImportedStylesheets(a,e.styleSheet,c)}},b.prototype.waitUntilCssLoads=function(a,b){var c,d,e,f=this;return c=!1,d=function(){return c?void 0:(c=!0,b())},a.onload=function(){return console.log("onload!"),f.knownToSupportCssOnLoad=!0,d()},this.knownToSupportCssOnLoad||(e=function(){return a.sheet?(console.log("polling!"),d()):f.Timer.start(50,e)})(),this.Timer.start(this.options.stylesheetReloadTimeout,d)},b.prototype.linkHref=function(a){return a.href||a.getAttribute("data-href")},b.prototype.reattachStylesheetLink=function(a){var b,c,d=this;if(!a.__LiveReload_pendingRemoval)return a.__LiveReload_pendingRemoval=!0,"STYLE"===a.tagName?(b=this.document.createElement("link"),b.rel="stylesheet",b.media=a.media,b.disabled=a.disabled):b=a.cloneNode(!1),b.href=this.generateCacheBustUrl(this.linkHref(a)),c=a.parentNode,c.lastChild===a?c.appendChild(b):c.insertBefore(b,a.nextSibling),this.waitUntilCssLoads(b,function(){var c;return c=/AppleWebKit/.test(navigator.userAgent)?5:200,d.Timer.start(c,function(){var c;if(a.parentNode)return a.parentNode.removeChild(a),b.onreadystatechange=null,null!=(c=d.window.StyleFix)?c.link(b):void 0})})},b.prototype.reattachImportedRule=function(a){var b,c,d,e,f,g,h,i,j=this;return h=a.rule,c=a.index,d=a.link,g=h.parentStyleSheet,b=this.generateCacheBustUrl(h.href),e=h.media.length?[].join.call(h.media,", "):"",f='@import url("'+b+'") '+e+";",h.__LiveReload_newHref=b,i=this.document.createElement("link"),i.rel="stylesheet",i.href=b,i.__LiveReload_pendingRemoval=!0,d.parentNode&&d.parentNode.insertBefore(i,d),this.Timer.start(this.importCacheWaitPeriod,function(){return i.parentNode&&i.parentNode.removeChild(i),h.__LiveReload_newHref===b?(g.insertRule(f,c),g.deleteRule(c+1),h=g.cssRules[c],h.__LiveReload_newHref=b,j.Timer.start(j.importCacheWaitPeriod,function(){return h.__LiveReload_newHref===b?(g.insertRule(f,c),g.deleteRule(c+1)):void 0})):void 0})},b.prototype.generateUniqueString=function(){return"livereload="+Date.now()},b.prototype.generateCacheBustUrl=function(a,b){var c,d,e,f;return null==b&&(b=this.generateUniqueString()),f=h(a),a=f.url,c=f.hash,d=f.params,this.options.overrideURL&&a.indexOf(this.options.serverURL)<0&&(a=this.options.serverURL+this.options.overrideURL+"?url="+encodeURIComponent(a)),e=d.replace(/(\?|&)livereload=(\d+)/,function(a,c){return""+c+b}),e===d&&(e=0===d.length?"?"+b:""+d+"&"+b),a+e+c},b}()}.call(this);var o,u,t,v,r;o=d.Connector,r=e.Timer,t=f.Options,v=g.Reloader,h.LiveReload=u=function(){function a(a){var b=this;return this.window=a,this.listeners={},this.plugins=[],this.pluginIdentifiers={},this.console=this.window.location.href.match(/LR-verbose/)&&this.window.console&&this.window.console.log&&this.window.console.error?this.window.console:{log:function(){},error:function(){}},(this.WebSocket=this.window.WebSocket||this.window.MozWebSocket)?(this.options=t.extract(this.window.document))?(this.reloader=new v(this.window,this.console,r),void(this.connector=new o(this.options,this.WebSocket,r,{connecting:function(){},socketConnected:function(){},connected:function(a){var c;return"function"==typeof(c=b.listeners).connect&&c.connect(),b.log("LiveReload is connected to "+b.options.host+":"+b.options.port+" (protocol v"+a+")."),b.analyze()},error:function(a){return console.log(a instanceof m?""+a.message+".":"LiveReload internal error: "+a.message)},disconnected:function(a,c){var d;switch("function"==typeof(d=b.listeners).disconnect&&d.disconnect(),a){case"cannot-connect":return b.log("LiveReload cannot connect to "+b.options.host+":"+b.options.port+", will retry in "+c+" sec.");case"broken":return b.log("LiveReload disconnected from "+b.options.host+":"+b.options.port+", reconnecting in "+c+" sec.");case"handshake-timeout":return b.log("LiveReload cannot connect to "+b.options.host+":"+b.options.port+" (handshake timeout), will retry in "+c+" sec.");case"handshake-failed":return b.log("LiveReload cannot connect to "+b.options.host+":"+b.options.port+" (handshake failed), will retry in "+c+" sec.");case"manual":break;case"error":break;default:return b.log("LiveReload disconnected from "+b.options.host+":"+b.options.port+" ("+a+"), reconnecting in "+c+" sec.")}},message:function(a){switch(a.command){case"reload":return b.performReload(a);case"alert":return b.performAlert(a)}}}))):void console.error("LiveReload disabled because it could not find its own <SCRIPT> tag"):void console.error("LiveReload disabled because the browser does not seem to support web sockets")}return a.prototype.on=function(a,b){return this.listeners[a]=b},a.prototype.log=function(a){return this.console.log(""+a)},a.prototype.performReload=function(a){var b,c;return this.log("LiveReload received reload request for "+a.path+"."),this.reloader.reload(a.path,{liveCSS:null!=(b=a.liveCSS)?b:!0,liveImg:null!=(c=a.liveImg)?c:!0,originalPath:a.originalPath||"",overrideURL:a.overrideURL||"",serverURL:"http://"+this.options.host+":"+this.options.port})},a.prototype.performAlert=function(a){return alert(a.message)},a.prototype.shutDown=function(){var a;return this.connector.disconnect(),this.log("LiveReload disconnected."),"function"==typeof(a=this.listeners).shutdown?a.shutdown():void 0},a.prototype.hasPlugin=function(a){return!!this.pluginIdentifiers[a]},a.prototype.addPlugin=function(a){var b,c=this;this.hasPlugin(a.identifier)||(this.pluginIdentifiers[a.identifier]=!0,b=new a(this.window,{_livereload:this,_reloader:this.reloader,_connector:this.connector,console:this.console,Timer:r,generateCacheBustUrl:function(a){return c.reloader.generateCacheBustUrl(a)}}),this.plugins.push(b),this.reloader.addPlugin(b))},a.prototype.analyze=function(){var a,b,c,d,e,f;if(this.connector.protocol>=7){for(c={},f=this.plugins,d=0,e=f.length;e>d;d++)a=f[d],c[a.constructor.identifier]=b=("function"==typeof a.analyze?a.analyze():void 0)||{},b.version=a.constructor.version;this.connector.sendCommand({command:"info",plugins:c,url:this.window.location.href})}},a}();var w;i=w=function(){function a(a,b){this.window=a,this.host=b}return a.identifier="less",a.version="1.0",a.prototype.reload=function(a,b){if(this.window.less&&this.window.less.refresh){if(a.match(/\.less$/i))return this.reloadLess(a);if(b.originalPath.match(/\.less$/i))return this.reloadLess(b.originalPath)}return!1},a.prototype.reloadLess=function(){var a,b,c,d;if(b=function(){var b,c,d,e;for(d=document.getElementsByTagName("link"),e=[],b=0,c=d.length;c>b;b++)a=d[b],(a.href&&"stylesheet/less"===a.rel||a.rel.match(/stylesheet/)&&a.type.match(/^text\/(x-)?less$/))&&e.push(a);return e}(),0===b.length)return!1;for(c=0,d=b.length;d>c;c++)a=b[c],a.href=this.host.generateCacheBustUrl(a.href);return this.host.console.log("LiveReload is asking LESS to recompile all stylesheets"),this.window.less.refresh(!0),!0},a.prototype.analyze=function(){return{disable:!(!this.window.less||!this.window.less.refresh)}},a}();var a,u,x;a=b,u=window.LiveReload=new h.LiveReload(window);for(x in window)x.match(/^LiveReloadPlugin/)&&u.addPlugin(window[x]);u.addPlugin(i),u.on("shutdown",function(){return delete window.LiveReload}),u.on("connect",function(){return a.fire(document,"LiveReloadConnect")}),u.on("disconnect",function(){return a.fire(document,"LiveReloadDisconnect")}),a.bind(document,"LiveReloadShutDown",function(){return u.shutDown()})}();